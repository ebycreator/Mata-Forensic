<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>META FORENSIC â€“ Case Manager</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- EXIF Reader -->
  <script src="https://cdn.jsdelivr.net/npm/exifreader@4.12.0/dist/exif-reader.min.js"></script>

  <!-- CryptoJS for MD5 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

  <!-- SheetJS for Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- jsPDF + html2canvas for PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

  <!-- Leaflet map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    /* Premium forensic styling */
    body {
      background: radial-gradient(circle at top, #071025 0%, #000000 100%);
      color: #e6eef6;
      -webkit-font-smoothing: antialiased;
      padding-bottom: 60px;
    }
    .glass-card {
      background: rgba(9, 12, 20, 0.6);
      border: 1px solid rgba(56,189,248,0.08);
      backdrop-filter: blur(8px);
      border-radius: 12px;
      padding: 16px;
    }
    .glow {
      text-shadow: 0 0 10px rgba(56,189,248,0.18);
    }
    .cyber-divider {
      height: 3px;
      width: 160px;
      background: linear-gradient(90deg, transparent, #38bdf8, #06b6d4, transparent);
      border-radius: 6px;
      margin: 8px auto 12px;
    }
    #map { height: 210px; border-radius: 10px; margin-top: 10px; }
    pre { white-space: pre-wrap; color: #dbeafe; }
    .small { font-size: 0.9rem; color: #cfeefe; }
  </style>
</head>
<body>

  <header class="text-center mb-8">
    <h1 class="text-5xl font-extrabold glow text-cyan-300">META FORENSIC</h1>
    <div class="cyber-divider"></div>
    <p class="small">Case Management â€¢ Image Metadata â€¢ Chain-of-Custody â€¢ Forensic Reports</p>
  </header>

  <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 px-4">

    <!-- LEFT: Case Management & Chain-of-Custody quick actions -->
    <section class="col-span-1">
      <div class="glass-card mb-4">
        <h2 class="font-semibold text-cyan-200 mb-2">Case Management</h2>

        <label class="block small mb-1">Create new case</label>
        <input id="caseTitle" placeholder="Case title or ID" class="w-full p-2 mb-2 bg-slate-900 rounded border" />
        <input id="caseInvestigator" placeholder="Investigator name" class="w-full p-2 mb-2 bg-slate-900 rounded border" />
        <div class="flex gap-2">
          <button id="createCaseBtn" class="bg-cyan-600 px-3 py-2 rounded">Create Case</button>
          <button id="clearCasesBtn" class="bg-yellow-600 px-3 py-2 rounded">Clear All</button>
        </div>

        <hr class="my-3 border-slate-700" />

        <label class="block small mb-1">Select case</label>
        <select id="caseSelect" class="w-full p-2 mb-2 bg-slate-900 rounded border"></select>

        <div id="caseDetails" class="small text-slate-200"></div>
      </div>

      <div class="glass-card mb-4">
        <h3 class="font-semibold text-cyan-200 mb-2">Chain-of-Custody (Auto-fill)</h3>

        <label class="block small mb-1">Actor (auto-filled from case)</label>
        <input id="cocActor" placeholder="Actor" class="w-full p-2 mb-2 bg-slate-900 rounded border" />

        <label class="block small mb-1">Action</label>
        <select id="cocAction" class="w-full p-2 mb-2 bg-slate-900 rounded border">
          <option>Collected</option>
          <option>Received</option>
          <option>Transferred</option>
          <option>Stored</option>
          <option>Analyzed</option>
          <option>Returned</option>
          <option>Other</option>
        </select>

        <input id="cocNote" placeholder="Optional note" class="w-full p-2 mb-2 bg-slate-900 rounded border" />

        <div class="flex gap-2">
          <button id="addCocAuto" class="bg-emerald-600 px-3 py-2 rounded">Add Entry</button>
          <button id="autoFillImport" class="bg-blue-600 px-3 py-2 rounded" title="Auto-add import entry when file analyzed">Auto-fill Import</button>
        </div>

        <hr class="my-3 border-slate-700" />

        <div class="small mb-2">CoC Log for selected case</div>
        <div id="cocLog" class="bg-slate-900 rounded p-2 max-h-56 overflow-auto small"></div>

        <div class="flex gap-2 mt-3">
          <button id="exportCoc" class="bg-cyan-600 px-3 py-2 rounded">Export CoC JSON</button>
          <button id="clearCoc" class="bg-red-600 px-3 py-2 rounded">Clear CoC</button>
        </div>
      </div>

      <div class="glass-card">
        <h3 class="font-semibold text-cyan-200 mb-2">Quick Actions</h3>
        <div class="flex flex-col gap-2">
          <button id="actionCollect" class="bg-slate-700 px-3 py-2 rounded">Mark as Collected</button>
          <button id="actionAnalyze" class="bg-slate-700 px-3 py-2 rounded">Mark as Analyzed</button>
          <button id="actionTransfer" class="bg-slate-700 px-3 py-2 rounded">Mark as Transferred</button>
        </div>
      </div>
    </section>

    <!-- MIDDLE: Upload / Preview / Map -->
    <section class="col-span-1">
      <div class="glass-card mb-4">
        <h2 class="font-semibold text-cyan-200 mb-2">Upload & Preview</h2>
        <input id="fileInput" type="file" accept="image/*" class="w-full p-2 mb-3 bg-slate-900 rounded border" />
        <img id="preview" class="w-full rounded shadow-lg border border-slate-700" style="max-height: 360px; object-fit: contain;" />
      </div>

      <div id="gpsCard" class="glass-card hidden">
        <h3 class="font-semibold text-cyan-200 mb-2">GPS</h3>
        <div id="gpsText" class="small"></div>
        <div id="map" class="mt-3"></div>
      </div>
    </section>

    <!-- RIGHT: Metadata & Exports -->
    <section class="col-span-1">
      <div class="glass-card mb-4">
        <h2 class="font-semibold text-cyan-200 mb-2">Metadata (Professional)</h2>
        <pre id="metadata" class="small bg-transparent p-0 m-0"></pre>
      </div>

      <div class="glass-card mb-4">
        <h3 class="font-semibold text-cyan-200 mb-2">Detected Editing / Manipulation</h3>
        <div id="editApps" class="small">â€”</div>
      </div>

      <div class="glass-card flex gap-2">
        <button id="downloadExcelBtn" class="bg-cyan-600 px-3 py-2 rounded">ðŸ“¥ Download Excel</button>
        <button id="generatePdfBtn" class="bg-emerald-600 px-3 py-2 rounded">ðŸ“„ Generate PDF Report</button>
        <button id="copyHashBtn" class="bg-slate-700 px-3 py-2 rounded">Copy SHA-256</button>
      </div>
    </section>

  </main>

<script>
/* ---------------------------
   Storage keys and helpers
   --------------------------- */
const CASES_KEY = "mf_cases_v1"; // list of case objects {id,title,investigator,coc:[]}
function loadCases() {
  try {
    const raw = localStorage.getItem(CASES_KEY);
    return raw ? JSON.parse(raw) : [];
  } catch { return []; }
}
function saveCases(list) { localStorage.setItem(CASES_KEY, JSON.stringify(list)); }

/* ---------------------------
   UI elements
   --------------------------- */
const caseSelect = document.getElementById("caseSelect");
const caseTitle = document.getElementById("caseTitle");
const caseInvestigator = document.getElementById("caseInvestigator");
const createCaseBtn = document.getElementById("createCaseBtn");
const clearCasesBtn = document.getElementById("clearCasesBtn");
const caseDetails = document.getElementById("caseDetails");

const fileInput = document.getElementById("fileInput");
const preview = document.getElementById("preview");
const metadataOut = document.getElementById("metadata");
const gpsCard = document.getElementById("gpsCard");
const gpsText = document.getElementById("gpsText");
const mapEl = document.getElementById("map");
const editAppsEl = document.getElementById("editApps");

const cocLogEl = document.getElementById("cocLog");
const cocActor = document.getElementById("cocActor");
const cocAction = document.getElementById("cocAction");
const cocNote = document.getElementById("cocNote");
const addCocAuto = document.getElementById("addCocAuto");
const autoFillImport = document.getElementById("autoFillImport");
const exportCoc = document.getElementById("exportCoc");
const clearCoc = document.getElementById("clearCoc");

const actionCollect = document.getElementById("actionCollect");
const actionAnalyze = document.getElementById("actionAnalyze");
const actionTransfer = document.getElementById("actionTransfer");

const downloadExcelBtn = document.getElementById("downloadExcelBtn");
const generatePdfBtn = document.getElementById("generatePdfBtn");
const copyHashBtn = document.getElementById("copyHashBtn");

/* ---------------------------
   App state
   --------------------------- */
let cases = loadCases();              // list of cases
let selectedCaseId = null;           // id of chosen case
let gpsMap = null;
let currentMetadata = null;          // ExifReader output
let currentFile = null;
let lastSha256 = "";                 // cached sha-256 of last file

/* ---------------------------
   Case management functions
   --------------------------- */
function refreshCaseSelect() {
  caseSelect.innerHTML = "";
  const placeholder = document.createElement("option");
  placeholder.value = "";
  placeholder.textContent = "-- Select case --";
  caseSelect.appendChild(placeholder);

  for (const c of cases) {
    const o = document.createElement("option");
    o.value = c.id;
    o.textContent = `${c.id} â€” ${c.title}`;
    caseSelect.appendChild(o);
  }
  renderCaseDetails();
}

function renderCaseDetails() {
  if (!selectedCaseId) {
    caseDetails.innerHTML = "<div class='small text-slate-300'>No case selected.</div>";
    cocLogEl.innerHTML = "(No CoC)";
    cocActor.value = "";
    return;
  }
  const c = cases.find(x => x.id === selectedCaseId);
  if (!c) return;
  caseDetails.innerHTML = `<div class="small"><strong>Case:</strong> ${c.id} â€” ${c.title}<br><strong>Investigator:</strong> ${c.investigator}</div>`;
  cocLogEl.innerHTML = "";
  if (!c.coc || c.coc.length === 0) cocLogEl.textContent = "(no custody entries)";
  else {
    for (const entry of c.coc) {
      const d = document.createElement("div");
      d.className = "border-b py-1 small";
      d.innerHTML = `<strong>${new Date(entry.time).toLocaleString()}</strong><div>${entry.actor} â€” ${entry.action}${entry.note ? " â€” " + entry.note : ""}</div>`;
      cocLogEl.appendChild(d);
    }
  }
  cocActor.value = c.investigator || "";
}

/* create case (auto-generate id) */
createCaseBtn.addEventListener("click", () => {
  const title = caseTitle.value.trim();
  const investigator = caseInvestigator.value.trim();
  if (!title) return alert("Enter a case title or ID");
  const id = "CASE-" + Date.now().toString().slice(-6);
  const newCase = { id, title, investigator, coc: [] };
  cases.push(newCase);
  saveCases(cases);
  refreshCaseSelect();
  // auto-select newly created
  caseSelect.value = id;
  selectedCaseId = id;
  renderCaseDetails();
  caseTitle.value = ""; caseInvestigator.value = "";
});

/* clear all cases */
clearCasesBtn.addEventListener("click", () => {
  if (!confirm("Clear all saved cases? This will remove stored CoC logs.")) return;
  cases = [];
  saveCases(cases);
  selectedCaseId = null;
  refreshCaseSelect();
});

/* on change selected case */
caseSelect.addEventListener("change", () => {
  selectedCaseId = caseSelect.value || null;
  renderCaseDetails();
});

/* ---------------------------
   Chain-of-Custody functions
   --------------------------- */
function addCocEntry(actor, action, note) {
  if (!selectedCaseId) return alert("Select a case first.");
  const c = cases.find(x => x.id === selectedCaseId);
  if (!c) return;
  const entry = { actor: actor || c.investigator || "Unknown", action, note: note || "", time: new Date().toISOString() };
  c.coc = c.coc || [];
  c.coc.push(entry);
  saveCases(cases);
  renderCaseDetails();
}

/* UI: add CoC via form */
addCocAuto.addEventListener("click", () => {
  const actor = cocActor.value.trim();
  const action = cocAction.value;
  const note = cocNote.value.trim();
  addCocEntry(actor, action, note);
  cocNote.value = "";
});

/* Export CoC JSON */
exportCoc.addEventListener("click", () => {
  if (!selectedCaseId) return alert("Select a case to export CoC.");
  const c = cases.find(x => x.id === selectedCaseId);
  const blob = new Blob([JSON.stringify(c, null, 2)], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = `CoC_${c.id}.json`;
  a.click();
  URL.revokeObjectURL(a.href);
});

/* Clear CoC for case */
clearCoc.addEventListener("click", () => {
  if (!selectedCaseId) return alert("Select a case.");
  if (!confirm("Clear CoC entries for this case?")) return;
  const c = cases.find(x => x.id === selectedCaseId);
  c.coc = [];
  saveCases(cases);
  renderCaseDetails();
});

/* Quick action buttons which add predefined CoC entries */
actionCollect.addEventListener("click", () => addCocEntry(null, "Collected", "Quick action"));
actionAnalyze.addEventListener("click", () => addCocEntry(null, "Analyzed", "Quick action"));
actionTransfer.addEventListener("click", () => addCocEntry(null, "Transferred", "Quick action"));

/* Auto-fill import: toggles whether analyzing a file auto-adds an import CoC entry */
let autoFillImportEnabled = true;
autoFillImport.addEventListener("click", () => {
  autoFillImportEnabled = !autoFillImportEnabled;
  autoFillImport.textContent = autoFillImportEnabled ? "Auto-fill Import (ON)" : "Auto-fill Import (OFF)";
  autoFillImport.classList.toggle("bg-blue-800");
});

/* ---------------------------
   File input / metadata
   --------------------------- */
fileInput.addEventListener("change", async (ev) => {
  const f = ev.target.files[0];
  if (!f) return;
  currentFile = f;
  preview.src = URL.createObjectURL(f);

  // read metadata via ExifReader
  const arrayBuffer = await f.arrayBuffer();
  let tags = {};
  try {
    tags = ExifReader.load(arrayBuffer, { expanded: true });
  } catch (e) {
    console.warn("Exif read failed", e);
  }
  currentMetadata = tags;

  // compute hashes
  const md5 = await computeMD5(arrayBuffer);
  const sha1 = await computeSubtleHash(arrayBuffer, "SHA-1");
  const sha256 = await computeSubtleHash(arrayBuffer, "SHA-256");
  lastSha256 = sha256; // cache

  // format metadata professionally
  metadataOut.textContent = formatMetadata(tags, f, { md5, sha1, sha256 });

  // Show GPS if present
  handleGPS(tags);

  // detect editing app(s)
  const apps = detectEditingApps(tags);
  editAppsEl.textContent = apps.length ? apps.join(", ") : "None detected";

  // auto-add CoC import entry if enabled and case selected
  if (autoFillImportEnabled && selectedCaseId) {
    const note = `Imported file ${f.name} (size ${(f.size/1024).toFixed(1)} KB). SHA-256: ${sha256}`;
    addCocEntry(null, "Received (Import)", note);
  }
});

/* ---------------------------
   Helper: format metadata in friendly sections
   --------------------------- */
function formatMetadata(tags, file, hashes={}) {
  const get = (k) => {
    const v = tags[k];
    if (!v) return null;
    // ExifReader expanded returns objects; prefer description then value
    if (typeof v === "object") return v.description ?? v.value ?? JSON.stringify(v);
    return v;
  };

  let out = "";
  out += `--- GENERAL INFO ---
File Name: ${file.name}
File Size: ${(file.size / (1024*1024)).toFixed(2)} MB
MIME Type: ${file.type || "N/A"}

`;

  out += `--- HASHES ---
MD5: ${hashes.md5 || "N/A"}
SHA-1: ${hashes.sha1 || "N/A"}
SHA-256: ${hashes.sha256 || "N/A"}

`;

  out += `--- CAMERA DETAILS ---
Make: ${get("Make") || "N/A"}
Model: ${get("Model") || "N/A"}
Serial Number: ${get("BodySerialNumber") || get("SerialNumber") || "N/A"}
Lens: ${get("LensModel") || "N/A"}

`;

  out += `--- IMAGE DETAILS ---
Resolution: ${get("ExifImageWidth") || "?"} x ${get("ExifImageHeight") || "?"}
Orientation: ${get("Orientation") || "N/A"}
Color Space: ${get("ColorSpace") || "N/A"}
Compression: ${get("Compression") || "N/A"}

`;

  out += `--- DATE & TIME ---
Original: ${get("DateTimeOriginal") || "N/A"}
Modified: ${get("ModifyDate") || get("DateTime") || "N/A"}

`;

  // Software / creator / processing tags
  const sw = get("Software") || get("ProcessingSoftware") || get("CreatorTool") || get("ImageUniqueID") || null;
  if (sw) {
    out += `--- SOFTWARE / PROCESSING ---
Software Tag: ${sw}
`;
  }

  // GPS
  if (tags.GPSLatitude && tags.GPSLongitude) {
    out += `
--- GPS ---
Latitude: ${tags.GPSLatitude.description || tags.GPSLatitude.value}
Longitude: ${tags.GPSLongitude.description || tags.GPSLongitude.value}
`;
  }

  return out;
}

/* ---------------------------
   Hashing helpers
   --------------------------- */
/* MD5 using CryptoJS: input ArrayBuffer -> WordArray */
async function computeMD5(arrayBuffer) {
  try {
    const wordArray = CryptoJS.lib.WordArray.create(arrayBuffer);
    return CryptoJS.MD5(wordArray).toString(CryptoJS.enc.Hex);
  } catch (e) {
    return "MD5_error";
  }
}

/* SubtleCrypto for SHA-1 and SHA-256; returns hex */
async function computeSubtleHash(arrayBuffer, algo) {
  try {
    const digest = await crypto.subtle.digest(algo, arrayBuffer);
    return Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2,'0')).join('');
  } catch (e) {
    return algo + "_error";
  }
}

/* ---------------------------
   GPS handling
   --------------------------- */
function handleGPS(tags) {
  // ExifReader often exposes GPSLatitude/GPSLongitude with description like "12.3456, ..."
  if (!tags.GPSLatitude || !tags.GPSLongitude) {
    gpsCard.classList.add("hidden");
    return;
  }
  let lat = tags.GPSLatitude.description || tags.GPSLatitude.value;
  let lon = tags.GPSLongitude.description || tags.GPSLongitude.value;

  // ensure numeric
  lat = parseFloat(String(lat).replace(/[^\d\.\-]/g, ''));
  lon = parseFloat(String(lon).replace(/[^\d\.\-]/g, ''));

  if (!isFinite(lat) || !isFinite(lon)) {
    gpsCard.classList.add("hidden");
    return;
  }

  gpsCard.classList.remove("hidden");
  gpsText.innerHTML = `Latitude: ${lat.toFixed(6)}<br>Longitude: ${lon.toFixed(6)}`;

  // init map if needed
  if (!gpsMap) {
    gpsMap = L.map('map').setView([lat, lon], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(gpsMap);
  } else {
    gpsMap.setView([lat, lon], 15);
    // remove previous markers by clearing layers except tile layer
    gpsMap.eachLayer(layer => {
      if (layer instanceof L.Marker) gpsMap.removeLayer(layer);
    });
  }
  L.marker([lat, lon]).addTo(gpsMap);
}

/* ---------------------------
   Detect editing / manipulation apps from metadata
   - looks at tags like Software, ProcessingSoftware, CreatorTool, XMP fields
   - heuristically matches common editors
   --------------------------- */
function detectEditingApps(tags) {
  const possibleKeys = ["Software", "ProcessingSoftware", "CreatorTool", "ImageHistory", "ImageProcessing", "ApplicationRecord"];
  let raw = "";
  for (const k of possibleKeys) {
    if (tags[k]) {
      const v = tags[k];
      raw += (v.description ?? v.value ?? String(v)) + " ";
    }
  }

  raw = raw.trim();
  if (!raw) return [];

  // normalize
  const s = raw.toLowerCase();

  const known = [
    { name: "Adobe Photoshop", match: ["photoshop", "adobe"] },
    { name: "Adobe Lightroom", match: ["lightroom"] },
    { name: "GIMP", match: ["gimp"] },
    { name: "Snapseed", match: ["snapseed"] },
    { name: "Instagram", match: ["instagram"] },
    { name: "Canva", match: ["canva"] },
    { name: "PicsArt", match: ["picsart"] },
    { name: "Affinity Photo", match: ["affinity"] },
    { name: "Paint.NET", match: ["paint.net","paintnet"] },
    { name: "Pixelmator", match: ["pixelmator"] },
    { name: "Photos.app (iOS/macOS)", match: ["photos"] },
    { name: "Camera Manufacturer App", match: ["sony", "canon", "nikon", "olympus", "panasonic", "fujifilm"] }
  ];

  const detected = [];
  for (const k of known) {
    for (const m of k.match) {
      if (s.includes(m)) { detected.push(k.name); break; }
    }
  }

  // if none matched but raw present, return raw text as fallback
  if (detected.length === 0) return [raw];

  // unique
  return Array.from(new Set(detected));
}

/* ---------------------------
   Exports: Excel & PDF & Copy SHA
   --------------------------- */
downloadExcelBtn.addEventListener("click", () => {
  if (!currentMetadata || !currentFile) return alert("Analyze an image first.");
  const text = metadataOut.textContent || "";
  // create sheet as line-per-row
  const rows = text.split("\n").map(r => [r]);
  const ws = XLSX.utils.aoa_to_sheet(rows);
  const wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, "Metadata");
  XLSX.writeFile(wb, `metadata_${currentFile.name || 'report'}.xlsx`);
});

generatePdfBtn.addEventListener("click", async () => {
  if (!currentFile || !currentMetadata) return alert("Analyze an image first.");
  // build a simple report DOM to render
  const report = document.createElement("div");
  report.style.width = "900px";
  report.style.padding = "16px";
  report.style.background = "white";
  report.style.color = "black";
  report.innerHTML = `
    <h1>META FORENSIC - Forensic Report</h1>
    <div><strong>Case:</strong> ${selectedCaseId || "(no case)"}</div>
    <div><strong>File:</strong> ${currentFile.name}</div>
    <hr/>
    <h3>Metadata</h3>
    <pre style="white-space:pre-wrap;">${metadataOut.textContent}</pre>
    <hr/>
    <h3>Detected Editing Apps</h3>
    <div>${editAppsEl.textContent}</div>
    <hr/>
    <h3>Chain of Custody</h3>
    <div style="font-size:12px;">
      ${ selectedCaseId ? (cases.find(c=>c.id===selectedCaseId).coc.map(e => `<div><strong>${new Date(e.time).toLocaleString()}</strong> â€” ${e.actor} â€” ${e.action} ${e.note?('â€” '+e.note):''}</div>`).join('') ) : '(no case selected)'}
    </div>
  `;

  document.body.appendChild(report);
  const canvas = await html2canvas(report, { scale: 2 });
  const imgData = canvas.toDataURL('image/jpeg', 0.9);
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({ orientation: "portrait", unit: "px", format: [canvas.width, canvas.height] });
  pdf.addImage(imgData, "JPEG", 0, 0, canvas.width, canvas.height);
  const filename = `forensic_report_${selectedCaseId || 'report'}.pdf`;
  pdf.save(filename);
  document.body.removeChild(report);
});

copyHashBtn.addEventListener("click", async () => {
  if (!lastSha256) return alert("No hash available.");
  await navigator.clipboard.writeText(lastSha256);
  alert("SHA-256 copied to clipboard");
});

/* ---------------------------
   Utils: initialize UI data
   --------------------------- */
function init() {
  // load cases into select
  refreshCaseSelect();
  // default Auto-fill ON
  autoFillImport.textContent = "Auto-fill Import (ON)";
  autoFillImport.classList.add("bg-blue-800");
}
init();

</script>
</body>
</html>
